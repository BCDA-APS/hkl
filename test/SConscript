Import('env')

sources = Split("""
                svecmat_test.cpp
                quaternion_test.cpp
                mystring_test.cpp
                object_test.cpp
                objectwithparameters_test.cpp
                value_test.cpp
                range_test.cpp
                fitparameter_test.cpp
                source_test.cpp
                axe_test.cpp
                geometry_test.cpp
                reflection_test.cpp
                crystal_test.cpp
                crystallist_test.cpp
                mode_eulerian4C_test.cpp
                pseudoaxe_eulerian4C_test.cpp
                affinement_simplex_test.cpp
                diffractometer_eulerian4C_test.cpp
                main.cpp
                """)

platform = env['PLATFORM']

includes = ['#include/hkl']
if platform == 'posix':
  includes += ['#include/hkl/linux']
elif platform in ['nt', 'win32']:
  includes += ['#include/hkl/win32']

obj = env.cppunitobj(env)
obj.includes = includes
obj.libpaths = ['../src']
obj.libs = ['hkl']
obj.target = 'test'
obj.source = sources
obj.execute()
